<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Ramadan Luxury Pull</title>

<style>
body{
margin:0;
overflow:hidden;
background:radial-gradient(circle at 30% 20%,#1a1f35,#05060a 70%);
font-family:"Noto Kufi Arabic",system-ui;
color:white;
}

canvas{position:fixed;inset:0;width:100%;height:100%}

.ui{
position:fixed;
inset:0;
display:flex;
flex-direction:column;
justify-content:space-between;
padding:20px;
pointer-events:none;
}

.title{
text-align:center;
opacity:0;
transform:translateY(30px);
transition:0.3s;
}

.title h1{
font-size:55px;
margin:0;
background:linear-gradient(90deg,#f6d365,#fff,#7cf7d4);
-webkit-background-clip:text;
color:transparent;
}

.title p{
margin-top:10px;
opacity:.8;
}

.ropeWrap{
position:fixed;
top:0;
left:50%;
transform:translateX(-50%);
height:100vh;
pointer-events:none;
}

.rope{
width:6px;
height:50vh;
background:linear-gradient(white,transparent);
margin:auto;
}

.knob{
position:absolute;
top:50vh;
width:60px;
height:60px;
border-radius:50%;
background:radial-gradient(circle at 30% 30%,#f6d365,#fda085);
display:flex;
align-items:center;
justify-content:center;
cursor:grab;
pointer-events:auto;
box-shadow:0 10px 40px rgba(0,0,0,.6);
}

.knob:active{cursor:grabbing}
</style>
</head>

<body>

<canvas id="c"></canvas>

<div class="ui">
<div></div>
<div class="title" id="title">
<h1>رمضان كريم</h1>
<p>أعاد الله علينا وعليكم الشهر بالخير والبركة</p>
</div>
<div></div>
</div>

<div class="ropeWrap">
<div class="rope"></div>
<div class="knob" id="knob">✨</div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

<script>

const scene=new THREE.Scene()
const camera=new THREE.PerspectiveCamera(45,innerWidth/innerHeight,.1,100)
camera.position.z=8

const renderer=new THREE.WebGLRenderer({canvas:c,alpha:true,antialias:true})
renderer.setSize(innerWidth,innerHeight)
renderer.setPixelRatio(devicePixelRatio)

window.addEventListener("resize",()=>{
renderer.setSize(innerWidth,innerHeight)
camera.aspect=innerWidth/innerHeight
camera.updateProjectionMatrix()
})

/* -------- Lights -------- */

const ambient=new THREE.AmbientLight(0xffffff,.05)
scene.add(ambient)

const light=new THREE.PointLight(0xffe7b0,0,20)
light.position.set(0,3,3)
scene.add(light)

/* -------- Stars -------- */

const starGeo=new THREE.BufferGeometry()
const starCount=1500
const starPos=new Float32Array(starCount*3)

for(let i=0;i<starCount;i++){
starPos[i*3]=(Math.random()-.5)*20
starPos[i*3+1]=(Math.random()-.5)*15
starPos[i*3+2]=-Math.random()*20
}

starGeo.setAttribute("position",new THREE.BufferAttribute(starPos,3))
const starMat=new THREE.PointsMaterial({color:0xffffff,size:.05})
const stars=new THREE.Points(starGeo,starMat)
scene.add(stars)

/* -------- Crescent -------- */

const crescent=new THREE.Group()

const outer=new THREE.Mesh(
new THREE.TorusGeometry(2,0.25,32,200,Math.PI*1.6),
new THREE.MeshStandardMaterial({color:0xf6d365,metalness:1,roughness:.2})
)

outer.rotation.z=.3
outer.rotation.x=.1

const inner=new THREE.Mesh(
new THREE.TorusGeometry(1.7,0.25,32,200,Math.PI*1.6),
new THREE.MeshStandardMaterial({color:0x05060a})
)

inner.position.x=.5
inner.position.y=-.1
inner.rotation.copy(outer.rotation)

crescent.add(outer,inner)
crescent.position.z=-5
crescent.scale.set(.4,.4,.4)
scene.add(crescent)

/* -------- Lantern -------- */

function lantern(x){
const g=new THREE.Group()

const body=new THREE.Mesh(
new THREE.CylinderGeometry(.4,.4,1,32),
new THREE.MeshStandardMaterial({color:0xfda085,metalness:.6,roughness:.4})
)

const glow=new THREE.PointLight(0xffd88a,0,10)
g.add(body,glow)
g.position.x=x
g.position.z=-6
return {g,glow}
}

const L1=lantern(-4)
const L2=lantern(4)
scene.add(L1.g,L2.g)

/* -------- Pull Logic -------- */

let reveal=0
let target=0

const knob=document.getElementById("knob")
const title=document.getElementById("title")

let dragging=false,startY=0,startVal=0

knob.addEventListener("pointerdown",e=>{
dragging=true
startY=e.clientY
startVal=target
knob.setPointerCapture(e.pointerId)
})

window.addEventListener("pointermove",e=>{
if(!dragging)return
const delta=(e.clientY-startY)/300
target=Math.min(1,Math.max(0,startVal+delta))
knob.style.top=(50+target*200)+"px"
})

window.addEventListener("pointerup",()=>dragging=false)

/* -------- Sound -------- */

const audio=new Audio("https://assets.mixkit.co/active_storage/sfx/2019/2019-preview.mp3")

/* -------- Animate -------- */

function animate(){
requestAnimationFrame(animate)

reveal+= (target-reveal)*.07

ambient.intensity=.05+reveal*.7
light.intensity=reveal*2

crescent.position.z=-5+reveal*6
crescent.scale.set(.4+reveal*.8,.4+reveal*.8,.4+reveal*.8)

L1.g.position.z=-6+reveal*6
L2.g.position.z=-6+reveal*6
L1.glow.intensity=reveal*3
L2.glow.intensity=reveal*3

title.style.opacity=reveal
title.style.transform=`translateY(${30-30*reveal}px)`

stars.rotation.y+=.0005

renderer.render(scene,camera)
}

animate()

</script>
</body>
</html>
