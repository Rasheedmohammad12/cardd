<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Ramadan Cinematic 10/10</title>

<style>
body{
margin:0;
overflow:hidden;
background:#02030a;
font-family:"Noto Kufi Arabic",system-ui;
color:white;
}

canvas{
position:fixed;
inset:0;
width:100%;
height:100%;
}

.ui{
position:fixed;
inset:0;
display:flex;
flex-direction:column;
justify-content:center;
align-items:center;
pointer-events:none;
}

.title{
text-align:center;
opacity:0;
transform:translateY(40px);
transition:0.6s cubic-bezier(.2,.8,.2,1);
}

.title h1{
font-size:64px;
margin:0;
background:linear-gradient(90deg,#f6d365,#fff,#7cf7d4);
-webkit-background-clip:text;
color:transparent;
}

.title p{
margin-top:14px;
opacity:.8;
}

.ropeWrap{
position:fixed;
top:0;
left:50%;
transform:translateX(-50%);
height:100vh;
pointer-events:none;
}

.rope{
width:6px;
height:50vh;
background:linear-gradient(white,transparent);
}

.knob{
position:absolute;
top:50vh;
width:64px;
height:64px;
border-radius:50%;
background:radial-gradient(circle at 30% 30%,#f6d365,#fda085);
display:flex;
align-items:center;
justify-content:center;
cursor:grab;
pointer-events:auto;
box-shadow:0 10px 60px rgba(0,0,0,.7);
}
.knob:active{cursor:grabbing}
</style>
</head>

<body>

<canvas id="c"></canvas>

<div class="ui">
<div class="title" id="title">
<h1>رمضان كريم</h1>
<p>أعاد الله علينا وعليكم الشهر بالخير والبركة</p>
</div>
</div>

<div class="ropeWrap">
<div class="rope"></div>
<div class="knob" id="knob">✨</div>
</div>

<script type="module">

import * as THREE from "https://unpkg.com/three@0.160.0/build/three.module.js";
import { EffectComposer } from "https://unpkg.com/three@0.160.0/examples/jsm/postprocessing/EffectComposer.js";
import { RenderPass } from "https://unpkg.com/three@0.160.0/examples/jsm/postprocessing/RenderPass.js";
import { UnrealBloomPass } from "https://unpkg.com/three@0.160.0/examples/jsm/postprocessing/UnrealBloomPass.js";

/* ---------- Scene Setup ---------- */

const scene=new THREE.Scene()
scene.fog=new THREE.Fog(0x02030a,8,25)

const camera=new THREE.PerspectiveCamera(45,innerWidth/innerHeight,.1,100)
camera.position.set(0,1,8)

const renderer=new THREE.WebGLRenderer({canvas:c,antialias:true})
renderer.setSize(innerWidth,innerHeight)
renderer.setPixelRatio(devicePixelRatio)
renderer.toneMapping=THREE.ACESFilmicToneMapping
renderer.toneMappingExposure=1.2

const composer=new EffectComposer(renderer)
composer.addPass(new RenderPass(scene,camera))
composer.addPass(new UnrealBloomPass(
new THREE.Vector2(innerWidth,innerHeight),
1.2,0.8,0.15
))

window.addEventListener("resize",()=>{
renderer.setSize(innerWidth,innerHeight)
composer.setSize(innerWidth,innerHeight)
camera.aspect=innerWidth/innerHeight
camera.updateProjectionMatrix()
})

/* ---------- Lights ---------- */

const ambient=new THREE.AmbientLight(0xffffff,.05)
scene.add(ambient)

const rim=new THREE.DirectionalLight(0xffd88a,0)
rim.position.set(-3,2,3)
scene.add(rim)

const key=new THREE.DirectionalLight(0xfff1cf,0)
key.position.set(3,4,5)
scene.add(key)

/* ---------- Gold Material ---------- */

const gold=new THREE.MeshPhysicalMaterial({
color:0xf6d365,
metalness:1,
roughness:.15,
clearcoat:1,
clearcoatRoughness:.05
})

/* ---------- Crescent ---------- */

const crescent=new THREE.Group()

const outer=new THREE.Mesh(
new THREE.TorusGeometry(2,0.18,64,200,Math.PI*1.7),
gold
)

outer.rotation.z=.3
outer.rotation.x=.15

const inner=new THREE.Mesh(
new THREE.TorusGeometry(1.6,0.18,64,200,Math.PI*1.7),
new THREE.MeshBasicMaterial({color:0x02030a})
)

inner.position.x=.6
inner.position.y=-.1
inner.rotation.copy(outer.rotation)

crescent.add(outer,inner)
crescent.position.z=-6
crescent.scale.set(.5,.5,.5)
scene.add(crescent)

/* ---------- Lanterns ---------- */

function lantern(x){
const g=new THREE.Group()

const body=new THREE.Mesh(
new THREE.CylinderGeometry(.4,.4,1.2,32),
new THREE.MeshStandardMaterial({color:0xfda085,metalness:.7,roughness:.3})
)

const glow=new THREE.PointLight(0xffe7b0,0,15)
g.add(body,glow)
g.position.x=x
g.position.z=-7
return {g,glow}
}

const L1=lantern(-4)
const L2=lantern(4)
scene.add(L1.g,L2.g)

/* ---------- Dust Particles ---------- */

const dustGeo=new THREE.BufferGeometry()
const dustCount=1200
const dustPos=new Float32Array(dustCount*3)

for(let i=0;i<dustCount;i++){
dustPos[i*3]=(Math.random()-.5)*10
dustPos[i*3+1]=(Math.random()-.5)*8
dustPos[i*3+2]=-Math.random()*10
}

dustGeo.setAttribute("position",new THREE.BufferAttribute(dustPos,3))
const dust=new THREE.Points(
dustGeo,
new THREE.PointsMaterial({color:0xffd88a,size:.03})
)
scene.add(dust)

/* ---------- Pull Logic ---------- */

let reveal=0,target=0
const knob=document.getElementById("knob")
const title=document.getElementById("title")

let dragging=false,startY=0,startVal=0

knob.addEventListener("pointerdown",e=>{
dragging=true
startY=e.clientY
startVal=target
knob.setPointerCapture(e.pointerId)
})

window.addEventListener("pointermove",e=>{
if(!dragging)return
const delta=(e.clientY-startY)/300
target=Math.min(1,Math.max(0,startVal+delta))
})

window.addEventListener("pointerup",()=>dragging=false)

/* ---------- Animate ---------- */

function animate(){
requestAnimationFrame(animate)

reveal+=(target-reveal)*.06

ambient.intensity=.05+reveal*.7
rim.intensity=reveal*2
key.intensity=reveal*1.5

crescent.position.z=-6+reveal*6
crescent.scale.set(.5+reveal*.8,.5+reveal*.8,.5+reveal*.8)
crescent.rotation.y+=.005

L1.g.position.z=-7+reveal*6
L2.g.position.z=-7+reveal*6
L1.glow.intensity=reveal*3
L2.glow.intensity=reveal*3

dust.rotation.y+=.0008

camera.position.x=Math.sin(Date.now()*.0002)*.3
camera.lookAt(0,0,0)

title.style.opacity=reveal
title.style.transform=`translateY(${40-40*reveal}px)`

composer.render()
}

animate()

</script>

</body>
</html>
