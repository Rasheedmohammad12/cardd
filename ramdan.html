<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Ramadan Ultimate Luxury 10/10</title>

<style>
body{
  margin:0;
  overflow:hidden;
  background:#000;
  font-family:"Noto Kufi Arabic",system-ui;
  color:white;
}

canvas{position:fixed;inset:0;width:100%;height:100%}

.ui{
  position:fixed; inset:0;
  display:flex; flex-direction:column;
  justify-content:space-between;
  padding:20px;
  pointer-events:none;
}

.title{
  text-align:center;
  margin-bottom:70px;
  opacity:0;
  transform:translateY(50px) scale(.98);
  transition:.9s cubic-bezier(.2,.8,.2,1);
  text-shadow:0 0 45px rgba(255,255,255,.35);
}

.title.on{opacity:1;transform:translateY(0) scale(1)}

.title h1{
  font-size:75px;
  margin:0;
  background:linear-gradient(90deg,#ffffff,#dddddd,#ffffff);
  -webkit-background-clip:text;
  color:transparent;
}

.title p{
  margin-top:15px;
  font-size:22px;
  opacity:.88;
}

.pop{
  position:fixed;
  left:50%;
  bottom:40px;
  transform:translateX(-50%);
  width:92px;
  height:92px;
  border-radius:50%;
  background:radial-gradient(circle,#f6d365,#ffb36b);
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:26px;
  cursor:pointer;
  box-shadow:0 0 50px rgba(255,200,120,.9);
  z-index:20;
  user-select:none;
}
.pop:active{transform:translateX(-50%) scale(.92)}
</style>
</head>

<body>

<canvas id="c"></canvas>

<div class="ui">
  <div></div>
  <div class="title" id="title">
    <h1>رمضان كريم</h1>
    <p>اللهم اجعل رمضان لنا نورًا… ورحمةً… وبداية خيرٍ لا تنتهي ✨</p>
  </div>
  <div></div>
</div>

<div class="pop" id="popBtn">✨</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

<script>
/* =========================
   SCENE
========================= */
const scene = new THREE.Scene();
scene.fog = new THREE.Fog(0x000000, 18, 55); // ضباب خفيف

const camera = new THREE.PerspectiveCamera(45, innerWidth/innerHeight, 0.1, 220);
camera.position.set(0, 1.6, 18);

const renderer = new THREE.WebGLRenderer({ canvas: c, antialias:true });
renderer.setSize(innerWidth, innerHeight);
renderer.setPixelRatio(Math.min(devicePixelRatio, 2));

window.addEventListener("resize", ()=>{
  renderer.setSize(innerWidth, innerHeight);
  camera.aspect = innerWidth/innerHeight;
  camera.updateProjectionMatrix();
});

/* =========================
   LIGHTS
========================= */
const ambient = new THREE.AmbientLight(0xffffff, 0.02);
scene.add(ambient);

const mainLight = new THREE.PointLight(0xffe7b0, 0, 120, 2);
mainLight.position.set(0, 8, 6);
scene.add(mainLight);

const rim = new THREE.DirectionalLight(0xbfefff, 0);
rim.position.set(-7, 2, -7);
scene.add(rim);

/* =========================
   STARS
========================= */
const starGeo = new THREE.BufferGeometry();
const starCount = 10000;
const starPos = new Float32Array(starCount*3);

for(let i=0;i<starCount;i++){
  starPos[i*3]   = (Math.random()-0.5)*140;
  starPos[i*3+1] = (Math.random()-0.5)*90;
  starPos[i*3+2] = -Math.random()*180;
}
starGeo.setAttribute("position", new THREE.BufferAttribute(starPos,3));

const stars = new THREE.Points(
  starGeo,
  new THREE.PointsMaterial({
    color:0xffffff,
    size:0.14,
    transparent:true,
    opacity:0.95,
    depthWrite:false
  })
);
scene.add(stars);

/* =========================
   GOLD DUST (floating)
========================= */
const dustGeo = new THREE.BufferGeometry();
const dustCount = 2200;
const dustPos = new Float32Array(dustCount*3);

for(let i=0;i<dustCount;i++){
  dustPos[i*3]   = (Math.random()-0.5)*24;
  dustPos[i*3+1] = (Math.random()-0.5)*16;
  dustPos[i*3+2] = -Math.random()*22;
}
dustGeo.setAttribute("position", new THREE.BufferAttribute(dustPos,3));

const dust = new THREE.Points(
  dustGeo,
  new THREE.PointsMaterial({
    color:0xffd88a,
    size:0.04,
    transparent:true,
    opacity:0.0,
    depthWrite:false
  })
);
scene.add(dust);

/* =========================
   GOLD GARLANDS (3 CHAINS)
========================= */
function makeGarland(y, sag, z, bulbCount){
  const pts=[];
  for(let i=0;i<=90;i++){
    const x=(i/90 - .5)*22;
    const yy=y + Math.sin(i/90*Math.PI)*sag;
    pts.push(new THREE.Vector3(x,yy,z));
  }

  const curve=new THREE.CatmullRomCurve3(pts);

  const ropeGeo=new THREE.TubeGeometry(curve,240,.055,12,false);
  const ropeMat=new THREE.MeshStandardMaterial({
    color:0xf6d365,
    metalness:1,
    roughness:.18,
    transparent:true,
    opacity:0
  });

  const rope=new THREE.Mesh(ropeGeo,ropeMat);
  scene.add(rope);

  const bulbs=[];
  for(let i=0;i<bulbCount;i++){
    const t=i/(bulbCount-1);
    const p=curve.getPoint(t);

    const bulb=new THREE.Mesh(
      new THREE.SphereGeometry(.22,20,20),
      new THREE.MeshStandardMaterial({
        color:0xfff3d0,
        emissive:0xffd88a,
        emissiveIntensity:0,
        transparent:true,
        opacity:0
      })
    );

    bulb.position.copy(p);

    const light=new THREE.PointLight(0xffd88a,0,20,2);
    light.position.copy(p);

    scene.add(bulb);
    scene.add(light);

    bulbs.push({bulb,light, idx:i});
  }

  return {ropeMat,bulbs};
}

const G1 = makeGarland(6.2, 0.85, -10, 24);
const G2 = makeGarland(5.2, 0.70, -10, 20);
const G3 = makeGarland(4.3, 0.55, -10, 16);

/* =========================
   VIP LANTERNS (3)
========================= */
function lantern(x){
  const g=new THREE.Group();

  const body=new THREE.Mesh(
    new THREE.CylinderGeometry(.62,.75,2.1,64,1,true),
    new THREE.MeshStandardMaterial({
      color:0xf6d365,
      metalness:.95,
      roughness:.25
    })
  );

  const top=new THREE.Mesh(
    new THREE.SphereGeometry(.55,44,30),
    new THREE.MeshStandardMaterial({
      color:0xf6d365,
      metalness:1,
      roughness:.18
    })
  );
  top.scale.set(1.35,.62,1.35);
  top.position.y=1.25;

  const bottom=top.clone();
  bottom.position.y=-1.25;

  const light=new THREE.PointLight(0xffd88a,0,55,2);
  g.add(body,top,bottom,light);

  g.position.set(x,0,-24);
  scene.add(g);

  return {g,light};
}

const L1 = lantern(-7);
const L2 = lantern(0);
const L3 = lantern(7);

/* =========================
   WHITE CRESCENT — TOP RIGHT + STAR
========================= */
const crescent = new THREE.Group();

const outer = new THREE.Mesh(
  new THREE.TorusGeometry(2.05, 0.33, 64, 220, Math.PI * 1.6),
  new THREE.MeshStandardMaterial({
    color:0xffffff,
    metalness:0.15,
    roughness:0.22,
    emissive:0xffffff,
    emissiveIntensity:0
  })
);
outer.rotation.z = 0.42;

const inner = new THREE.Mesh(
  new THREE.TorusGeometry(1.60, 0.33, 64, 220, Math.PI * 1.6),
  new THREE.MeshBasicMaterial({ color:0x000000 })
);
inner.position.x = 0.58;
inner.rotation.copy(outer.rotation);

const smallStar = new THREE.Mesh(
  new THREE.IcosahedronGeometry(0.18, 1),
  new THREE.MeshStandardMaterial({
    color:0xffffff,
    metalness:0.2,
    roughness:0.25,
    emissive:0xffffff,
    emissiveIntensity:0
  })
);
smallStar.position.set(1.55, 1.10, 0.15);

crescent.add(outer, inner, smallStar);

// فوق اليمين
crescent.position.set(7.2, 4.8, -40);
scene.add(crescent);

/* =========================
   REVEAL / TOGGLE
========================= */
let reveal = 0;
let target = 0;

const title = document.getElementById("title");
const popBtn = document.getElementById("popBtn");

popBtn.onclick = ()=>{
  target = 1;
  title.classList.add("on");
  popBtn.style.display="none";
};

/* =========================
   ANIMATE
========================= */
function animate(){
  requestAnimationFrame(animate);

  const t = Date.now()*0.001;

  reveal += (target - reveal) * 0.05;

  // lights
  ambient.intensity = 0.02 + reveal*0.65;
  mainLight.intensity = reveal*3.4;
  rim.intensity = reveal*0.55;

  // dust + fog feel
  dust.material.opacity = reveal*0.55;
  dust.rotation.y = t*0.06;

  // garlands: rope + bulbs cascade
  const garlands = [G1,G2,G3];
  garlands.forEach((G,gi)=>{
    G.ropeMat.opacity = reveal;

    G.bulbs.forEach((b,i)=>{
      // cascade (تشتغل لمبة لمبة)
      const step = (i / (G.bulbs.length-1));
      const cascade = Math.max(0, Math.min(1, (reveal - step*0.45) / 0.55));

      const tw = 0.65 + Math.sin(t*2.0 + i*0.55 + gi)*0.35;

      b.bulb.material.opacity = cascade;
      b.bulb.material.emissiveIntensity = cascade*(3.0 + tw*1.8);
      b.light.intensity = cascade*(6.0 + tw*3.6);
    });
  });

  // lanterns appear + swing
  [L1,L2,L3].forEach((L,i)=>{
    L.g.position.z = -24 + reveal*18;
    L.light.intensity = reveal*10;

    L.g.rotation.z = Math.sin(t*0.9 + i)*0.12;
    L.g.rotation.y = Math.sin(t*0.55 + i)*0.08;
  });

  // crescent: reveal + rotate + star twinkle
  crescent.position.z = -40 + reveal*20;
  crescent.rotation.y += 0.006;

  outer.material.emissiveIntensity = reveal*1.9;

  const twinkle = 0.65 + Math.sin(t*2.4)*0.35;
  smallStar.material.emissiveIntensity = reveal*(1.6 + twinkle*1.2);
  smallStar.rotation.y = -t*1.4;
  smallStar.rotation.x = t*1.1;

  // stars drift
  stars.rotation.y += 0.00045;

  // camera drift (cinematic)
  camera.position.x = Math.sin(t*0.12)*0.22;
  camera.position.y = 1.6 + Math.sin(t*0.10)*0.12;
  camera.lookAt(0, 1.0, 0);

  renderer.render(scene, camera);
}
animate();
</script>

</body>
</html>
